---
phase: 10-navigation-ux
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/components/keyboard-shortcuts-modal.tsx
  - src/hooks/use-keyboard-shortcuts.ts
  - src/app/dashboard/layout.tsx
  - src/app/dashboard/signals/page.tsx
autonomous: true

must_haves:
  truths:
    - "User can press ? to see available keyboard shortcuts"
    - "User can press j/k to navigate signal list items"
    - "User can press Enter to open selected signal"
    - "Modal closes on Escape or clicking outside"
  artifacts:
    - path: "src/components/keyboard-shortcuts-modal.tsx"
      provides: "Help modal showing all shortcuts"
      min_lines: 60
    - path: "src/hooks/use-keyboard-shortcuts.ts"
      provides: "Enhanced keyboard shortcut handling"
      contains: "setShowHelp"
  key_links:
    - from: "src/hooks/use-keyboard-shortcuts.ts"
      to: "keyboard-shortcuts-modal.tsx"
      via: "showHelp state and setShowHelp callback"
      pattern: "showHelp|setShowHelp"
---

<objective>
Enhance keyboard shortcuts with a help modal and j/k list navigation.

Purpose: Power users expect keyboard navigation in SaaS apps. Showing available shortcuts via ? reduces friction and makes navigation discoverable.

Output: Working help modal and j/k navigation in signal lists.
</objective>

<execution_context>
@/home/qualia/.claude/get-shit-done/workflows/execute-plan.md
@/home/qualia/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@src/hooks/use-keyboard-shortcuts.ts
@src/components/keyboard-shortcuts-provider.tsx
@src/app/dashboard/layout.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create keyboard shortcuts help modal</name>
  <files>src/components/keyboard-shortcuts-modal.tsx</files>
  <action>
Create a new component that displays all available keyboard shortcuts in a modal dialog.

Structure:
- Use framer-motion for smooth fade/scale animation
- Display shortcuts in groups: Navigation (g+d, g+s, etc.), Actions (j/k, Enter, Esc)
- Show keyboard key styled with `kbd` element using existing design system variables
- Close on Escape key or clicking backdrop
- Accept `isOpen` and `onClose` props

Style using existing CSS variables:
- `var(--bg-primary)` for modal background
- `var(--border-subtle)` for borders
- `var(--text-primary/secondary/tertiary)` for text hierarchy
- Rounded corners with `rounded-xl`
- Backdrop with `bg-black/50 backdrop-blur-sm`

Shortcuts to display:
| Key | Action |
| g d | Go to Dashboard |
| g s | Go to Signals |
| g e | Go to Emails |
| g a | Go to Accounts |
| g n | Go to Analytics |
| g r | Go to Rules |
| g , | Go to Settings |
| j/k | Previous/Next item |
| Enter | Open selected |
| Esc | Close modal/deselect |
| ? | Show this help |
  </action>
  <verify>File exists and exports KeyboardShortcutsModal component with TypeScript types</verify>
  <done>Modal component renders with all shortcuts grouped logically</done>
</task>

<task type="auto">
  <name>Task 2: Enhance keyboard shortcuts hook with help modal and j/k navigation</name>
  <files>src/hooks/use-keyboard-shortcuts.ts, src/components/keyboard-shortcuts-provider.tsx, src/app/dashboard/layout.tsx</files>
  <action>
Update the keyboard shortcuts system to support the help modal and j/k navigation.

Changes to use-keyboard-shortcuts.ts:
1. Add state: `showHelp`, `selectedIndex`, `setSelectedIndex`
2. Add ? key handler to toggle `showHelp`
3. Add j key handler to increment `selectedIndex`
4. Add k key handler to decrement `selectedIndex`
5. Add Enter key handler to navigate to selected item (via custom event)
6. Return these values from the hook: `{ showHelp, setShowHelp, selectedIndex, setSelectedIndex }`
7. Dispatch custom event `signal-list-select` with index when j/k pressed
8. Dispatch custom event `signal-list-open` when Enter pressed

Changes to keyboard-shortcuts-provider.tsx:
1. Import KeyboardShortcutsModal
2. Get showHelp/setShowHelp from useKeyboardShortcuts
3. Render KeyboardShortcutsModal conditionally

Changes to dashboard/layout.tsx:
1. No changes needed - provider already wraps content

The hook should expose these values via a context or return value so the modal can be controlled.
  </action>
  <verify>
- Press ? in dashboard - modal appears
- Press Esc or click outside - modal closes
- TypeScript compiles without errors: `npx tsc --noEmit`
  </verify>
  <done>Help modal toggles with ? key, closes with Escape</done>
</task>

<task type="auto">
  <name>Task 3: Add j/k navigation to signals list</name>
  <files>src/app/dashboard/signals/page.tsx</files>
  <action>
Add visual selection state to signals list that responds to j/k keyboard navigation.

Implementation:
1. Add state for `selectedIndex` (null initially)
2. Add useEffect to listen for `signal-list-select` and `signal-list-open` custom events
3. When j/k pressed: update selectedIndex, scroll selected item into view
4. When Enter pressed: navigate to `/dashboard/signals/${signals[selectedIndex].id}`
5. Add visual highlight to selected signal card using ring/outline styling
6. Pass `isSelected` prop to SignalCard if needed, or wrap in container with selection ring
7. Reset selection when filters change

Selection styling:
- Add `ring-2 ring-[var(--accent)] ring-offset-2` to selected card
- Ensure card scrolls into view with `scrollIntoView({ block: 'nearest', behavior: 'smooth' })`

Boundary handling:
- j at bottom: stay at last item
- k at top: stay at first item
- Empty list: no-op
  </action>
  <verify>
1. Navigate to /dashboard/signals
2. Press j - first signal card gets selection ring
3. Press j again - moves to next card, scrolls if needed
4. Press k - moves to previous
5. Press Enter - navigates to signal detail page
6. Press Esc - clears selection
  </verify>
  <done>j/k navigates signal list, Enter opens selected signal, visual feedback shows selection</done>
</task>

</tasks>

<verification>
1. `npx tsc --noEmit` passes
2. Press ? anywhere in dashboard - help modal shows
3. Press Esc or click outside - modal closes
4. On signals page: j/k navigates list, Enter opens signal
5. Selection ring visible on focused item
6. g+s, g+d, etc. still work (regression check)
</verification>

<success_criteria>
- Keyboard shortcuts help modal accessible via ? key
- j/k navigation works in signals list with visual feedback
- Enter opens selected signal
- No TypeScript errors
- Existing shortcuts still functional
</success_criteria>

<output>
After completion, create `.planning/phases/10-navigation-ux/10-01-SUMMARY.md`
</output>
